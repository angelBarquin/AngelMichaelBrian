<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Draft</title>
    <style>

        body {
            background-image: url("images/back2.jpg");


        }
        hr{
            border-top: 3px double #8c8b8b;
        }
        #headButtons{
            opacity: 0.7;
            filter: alpha(opacity=50);
        }
    </style>
</head>
<body>
    <!--Header of page-->
    <div id="headButtons">
        <a href="draft.html"><button type="button" class="btn btn-secondary float-right">Draft</button></a>
        <button type="button" id="theme" onclick="darkTheme()" class="btn btn-secondary float-right">Try our dark theme</button></a>
    </div>

    <!--Upper set of columns here-->
<div class="row">
    <div class="col-xs-4">
    </div>
    <div class="col-xs-4">

        <h2 id="header1" style="text-align: center">Hello <span id="customerName"></span>.  What would you like to do?</h2>  <!-- displays the name of the customer when he logs in-->
    </div>
    <div class="col-xs-4">
    </div>
</div>

<hr>
    <!--Body set of columns here-->
<div class="row">
    <div class="col-xs-4">
        <img src="" class="img-thumbnail" width="500" height="300" id="myPicture" alt="Responsive image">
    </div>
    <div class="col-xs-4">
        <a href="shop.html"><button type="button" id="button1" class="btn btn-primary btn-lg btn-block">Browse the shop</button></a><br>
        <button id="button2" type="button" onclick="alert('Try these coupons: SPRING || WINTER || AUTUMN || SUMMER')" class="btn btn-primary btn-lg btn-block">Request Coupon</button><br>
        <a href="basket.html"> <button  id="button3" type="button" class="btn btn-primary btn-lg btn-block">See shopping cart</button></a><br>
        <button  id="button4" type="button" onclick="displayBoxes()" class="btn btn-primary btn-lg btn-block">Change account details</button><br>
        <a href="index.html"><button  id="button5" type="button" class="btn btn-primary btn-lg btn-block">Log out</button></a><br>

        <div class="invisible" id="detailsForm"><form id="loginDetails">
            <div class="form-group">
                <label>Username: <span id="oldCustomerName"></span></label>
                <input type="text" class="form-control" id="name" aria-describedby="emailHelp" placeholder="Enter new username">
                <small id="emailHelp" class="form-text text-muted">We'll never share your username with anyone else.</small>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" class="form-control" id="pass" placeholder="Password">
            </div>
            <button type="button" id="changeDetailsButton" class="btn btn-primary" onclick="changeDetails()">Change details</button>
            <div class="form-check">
            </div>
        </form></div>
        <p id="successMessage" class="text-danger"></p>
    </div>
    <div class="col-xs-4">
        <img src="images/weeklydraw.png" width="92%" height="92%" id="draw" alt="Image could not load">
        <a href="form.html"><button type="button" class="btn btn-secondary btn-lg btn-block">Register here for a monthly draw of our products</button></a>

   </div>
   </div>
</div>

</body>
</html>
<script>

    // This is to allow the key 13(enter) to click Change details
    var input = document.getElementById("pass");
    input.addEventListener("keyup", function(event) {
        if (event.keyCode === 13) {
            document.getElementById("changeDetailsButton").click();
        }
    });

    // Random image generator. We use an array with the path of different images and replace the src with a random one
    var pictures = new Array("images/samsumg.jpg","images/watch.jpg", "images/mcdonalds.png", "images/iphone.jpg", "images/skittles.jpg", "images/doritos.png");
    var randomNum = Math.floor(Math.random() * pictures.length);
    document.getElementById("myPicture").src = pictures[randomNum];

    // Displays the name of the customer when he logs in
    if (sessionStorage.name == localStorage.name1)
    {
        document.getElementById("customerName").innerHTML = localStorage.name1;
        document.getElementById("oldCustomerName").innerHTML = localStorage.name1;
    }
    else if (sessionStorage.name == localStorage.name2)
    {
        document.getElementById("customerName").innerHTML = localStorage.name2;
        document.getElementById("oldCustomerName").innerHTML = localStorage.name2;
    }
    else if (sessionStorage.name == localStorage.name3)
    {
        document.getElementById("customerName").innerHTML = localStorage.name3;
        document.getElementById("oldCustomerName").innerHTML = localStorage.name3;
    }
    else if (sessionStorage.name == localStorage.name4)
    {
        document.getElementById("customerName").innerHTML = localStorage.name4;
        document.getElementById("oldCustomerName").innerHTML = localStorage.name4;
    }
    else
    {
        document.getElementById("customerName").innerHTML = "Guest";

    }

    // Makes visible the fields for changing user details
    function displayBoxes(){

        document.getElementById("detailsForm").className = "visible";

    }

    // Changes the details of the customer that logged in
    function changeDetails(){

        if (sessionStorage.name == localStorage.name1)
        {
            localStorage.name1 = document.getElementById("name").value;
            localStorage.password1 = document.getElementById("pass").value;
        }
        else if (sessionStorage.name == localStorage.name2)
        {
            localStorage.name2 = document.getElementById("name").value;
            localStorage.password2 = document.getElementById("pass").value;
        }
        else if (sessionStorage.name == localStorage.name3)
        {
            localStorage.name3 = document.getElementById("name").value;
            localStorage.password3 = document.getElementById("pass").value;
        }
        else
        {
            localStorage.name4 = document.getElementById("name").value;
            localStorage.password4 = document.getElementById("pass").value;
        }

        // Makes the form invisible again and displays a message
        document.getElementById("detailsForm").className = "invisible";

        document.getElementById("successMessage").innerHTML = "Details changed successfully";
    }

    //function for a dark theme page
    var pressed = false;

    function darkTheme() {

        if (pressed == false)
        {
            pressed = true;

            document.getElementById("theme").innerHTML = "Reverse to light theme";
            document.getElementById("header1").style.color = "white";
            document.body.style.backgroundImage= "url('images/dark1.jpg')";
            document.getElementById("successMessage").className = "p-3 mb-2 bg-warning text-white";
            document.getElementById("loginDetails").style.color = "white";
            document.getElementById("changeDetailsButton").className = "btn btn-light";
            document.getElementById("button1").className = "btn btn-secondary btn-lg btn-block";
            document.getElementById("button2").className = "btn btn-secondary btn-lg btn-block";
            document.getElementById("button3").className = "btn btn-secondary btn-lg btn-block";
            document.getElementById("button4").className = "btn btn-secondary btn-lg btn-block";
            document.getElementById("button5").className = "btn btn-secondary btn-lg btn-block";

        }
        else{
            window.location.reload();
        }

    }
</script>

